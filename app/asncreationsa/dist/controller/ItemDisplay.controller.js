sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("sap.fiori.asncreationsa.controller.ItemDisplay",{onInit:function(){this.oDataModel=sap.ui.getCore().getModel("oDataModel");this.getView().setModel(this.oDataModel);this.router=sap.ui.core.UIComponent.getRouterFor(this);this.router.attachRouteMatched(this._handleRouteMatched,this);this.itemModel=new sap.ui.model.json.JSONModel;this.getView().setModel(this.itemModel,"itemModel")},_handleRouteMatched:function(e){var t=this;this.pItemModel=sap.ui.getCore().getModel("pItemModel");this.getView().setModel(this.pItemModel,"pItemModel");this.pData=this.pItemModel.getData();if("ItemDisplay"!==e.getParameter("name")){return}var i=sessionStorage.getItem("unitCode")||"P01";var o=e.getParameter("arguments").Schedule_No;this.Schedule_No=o.replace(/-/g,"/");this.Material_No=e.getParameter("arguments").Material_No;this.Line_No=e.getParameter("arguments").Line_No;var r=this.getOwnerComponent().getModel();return new Promise(function(e,o){r.callFunction("/getSchedulingAgreementMaterialQuantityList",{method:"GET",urlParameters:{UnitCode:i,PoNum:this.Schedule_No,MaterialCode:this.Material_No,PoLineNum:this.Line_No},success:function(i,o){t.itemModel.setData(i.results);t.itemModel.refresh(true.results);e()}.bind(this),error:function(e){o(new Error("Failed to fetch material data."))}})}.bind(this))},onNavBack:function(){jQuery.sap.require("sap.ui.core.routing.History");var e=sap.ui.core.routing.History.getInstance(),t=e.getPreviousHash();if(t!==undefined){history.go(-1)}else{var i=true;this.router.navTo("SASplit",{},i)}}})});