sap.ui.define(["sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/odata/ODataModel","sap/fiori/asncreationsa/controller/formatter","sap/ui/Device","sap/fiori/asncreationsa/model/models","sap/ui/core/routing/HashChanger"],function(e,a,t,s,r,i,o){"use strict";return e.extend("sap.fiori.asncreationsa.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);var s=window.location.href.includes("site")?"/":"";var r=jQuery.sap.getModulePath("sap/fiori/asncreationsa");r=r==="."?"":r;var o=r+s+this.getMetadata().getManifestEntry("sap.app").dataSources.mainService.uri;var n=new t(o,true);n.attachMetadataFailed(e=>{var t=e.getParameter("response").body;if(t.indexOf("<?xml")!==-1){a.error($($.parseXML(t)).find("message").text())}else{a.error(t)}});n.attachMetadataLoaded(()=>{this.setModel(n);sap.ui.getCore().setModel(n,"oDataModel");n.setDefaultCountMode("None");var e=new sap.ui.model.json.JSONModel;sap.ui.getCore().setModel(e,"pItemModel");this.setModel(i.createDeviceModel(),"device");var a=window.location.href.includes("site");if(a){$.ajax({url:r+s+"user-api/attributes",type:"GET",success:e=>{if(!sessionStorage.getItem("AddressCodeASNSA")){sessionStorage.setItem("AddressCodeASNSA",e.login_name[0])}this.setHeaders(e.login_name[0],e.type[0].substring(0,1).toUpperCase())}})}else{this.setHeaders("AKI-03-01","P")}});n.attachRequestFailed(e=>{var t=e.getParameter("responseText");if(t.indexOf("<?xml")!==-1){a.error($($.parseXML(t)).find("message").text())}else{a.error(JSON.parse(t).error.message.value)}})},setHeaders:function(e,a){this.getModel().setHeaders({loginId:e,loginType:a});o.getInstance().replaceHash("");this.getRouter().initialize()}})});